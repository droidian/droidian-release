# This is the Debian base for this snapshot
Source: debian-snapshot:@DEBIAN_SNAPSHOT@
Suites: @DEBIAN_SUITE@
Components: main contrib non-free
Architectures: amd64 armhf arm64

# These are the Droidian packages overlayed on top
Source: droidian:production
Suites: trixie
Components: main
Architectures: amd64 armhf arm64

# A phone-focused fork of gnome-clocks, to be
# used until GNOME Clocks gets a proper adaptive redesign.
Source: droidian:droidian-gnome-clocks:next-upgrade-46-0
Suites: trixie
Components: main
Architectures: amd64 armhf arm64

# Droidian: use a version of gst-plugins-bad1.0 without
# the uvch264 module built-in
Source: droidian:droidian-gst-plugins-bad1.0:next-workaround-disable-uvch264
Suites: trixie
Architectures: armhf arm64

# callaudiod: still WIP
Source: droidian:droidian-callaudiod:next-droid-0-1-4
Suites: trixie
Components: main
Architectures: amd64 armhf arm64

# 2024-05-03: snapshot-aware droidian-release
Source: droidian:droidian-droidian-release:trixie-snapshots
Suites: trixie
Components: main
Architectures: amd64 armhf arm64

# 2024-07-03: use a version of chatty with a fix for to Chatty#893
Source: droidian:droidian-chatty:next-notification-fix
Suites: trixie
Architectures: amd64 armhf arm64

# 2024-07-31: network-manager: remove GDBusObjectManagerClient hack
Source: droidian:droidian-network-manager:next-wwan-fix
Suites: trixie
Architectures: amd64 armhf arm64

# 2024-07-04: deprefer Debian's libwlroots12t64 to make APT choose
# the right version. This is only needed during development, and
# once wlroots is merged can be removed
Package: libwlroots12t64:arm64 libwlroots-dev:arm64 libwlroots12t64:armhf libwlroots-dev:armhf libwlroots12t64:amd64 libwlroots-dev:amd64
Pin: version 0.17.4-1+b1
Pin-Priority: -1

# 2024-08-04: firefox mobile config with Droidian characteristics 
Source: droidian:droidian-firefox-esr-mobile-config:next-tabs
Suites: trixie
Architectures: amd64 armhf arm64

# 2024-08-15: prefer glib version with fix for pid tracking on
# older kernels
Source: droidian:droidian-glib:next-pidfd
Suites: trixie
Architectures: amd64 armhf arm64

# 2024-08-21: upower >= 1.90.3 has the fake batteries fix,
# so the version in the Droidian (prod) archive is not
# needed anymore. Prefer Debian's until we drop it
# definitely from there.
Package: gir1.2-upowerglib-1.0:arm64 gir1.2-upowerglib-1.0:armhf gir1.2-upowerglib-1.0:amd64 libupower-glib-dev:arm64 libupower-glib-dev:armhf libupower-glib-dev:amd64 libupower-glib3:arm64 libupower-glib3:armhf libupower-glib3:amd64 upower:arm64 upower:armhf upower:amd64 upower-tests:arm64 upower-tests:armhf upower-tests:amd64 upower-doc
Pin: release o=Droidian
Pin-Priority: -1

# Droidian 99: Add new graphical stack. This stack
# will be merged during Droidian 100 development, but
# for now keep it as feature branches to be able to easily
# drop them from 99 if there are issues
Source: droidian:droidian-wlroots:next-upgrade-0-17-4
Suites: trixie
Architectures: amd64 armhf arm64

Source: droidian:droidian-phoc:next-upgrade-0-40-0
Suites: trixie
Architectures: amd64 armhf arm64

Source: droidian:droidian-phosh:next-wlroots-0-17
Suites: trixie
Architectures: amd64 armhf arm64

# 2024-08-29: with newer phoc, we can use Debian's
# phosh-mobile-settings
Package: phosh-mobile-settings:arm64 phosh-mobile-settings:amd64 phosh-mobile-settings:armhf
Pin: release o=Droidian
Pin-Priority: -1

# 2024-09-01: an old version of phosh-osk-stub is
# sticking around in the Droidian archives, and we
# probably don't want that
Package: phosh-osk-stub:arm64 phosh-osk-stub:armhf phosh-osk-stub:amd64
Pin: release o=Droidian
Pin-Priority: -1

# 2024-09-15: some other parts of GNOME 47 not yet in sid
Source: debian-snapshot:@DEBIAN_SNAPSHOT@
Suites: experimental
Components: main contrib non-free
Architectures: amd64 armhf arm64

# Deprefer everything from experimental
Package: *
Pin: release a=experimental
Pin-Priority: -1

# ...except these packages:
Package: gnome-software:arm64 gnome-software:armhf gnome-software:amd64 gnome-software-common:arm64 gnome-software-common:armhf gnome-software-common:amd64 gnome-software-dev:arm64 gnome-software-dev:armhf gnome-software-dev:amd64 gnome-software-doc:arm64 gnome-software-doc:armhf gnome-software-doc:amd64 gnome-software-plugin-deb:arm64 gnome-software-plugin-deb:armhf gnome-software-plugin-deb:amd64 gnome-software-plugin-flatpak:arm64 gnome-software-plugin-flatpak:armhf gnome-software-plugin-flatpak:amd64 gnome-software-plugin-fwupd:arm64 gnome-software-plugin-fwupd:armhf gnome-software-plugin-fwupd:amd64 gnome-software-plugin-snap:arm64 gnome-software-plugin-snap:armhf gnome-software-plugin-snap:amd64 gir1.2-gtk-4.0:arm64 gir1.2-gtk-4.0:armhf gir1.2-gtk-4.0:amd64 gtk-4-examples:arm64 gtk-4-examples:armhf gtk-4-examples:amd64 gtk-4-tests:arm64 gtk-4-tests:armhf gtk-4-tests:amd64 libgtk-4-1:arm64 libgtk-4-1:armhf libgtk-4-1:amd64 libgtk-4-bin:arm64 libgtk-4-bin:armhf libgtk-4-bin:amd64 libgtk-4-common:arm64 libgtk-4-common:armhf libgtk-4-common:amd64 libgtk-4-dev:arm64 libgtk-4-dev:armhf libgtk-4-dev:amd64 libgtk-4-doc:arm64 libgtk-4-doc:armhf libgtk-4-doc:amd64 libgtk-4-media-gstreamer:arm64 libgtk-4-media-gstreamer:armhf libgtk-4-media-gstreamer:amd64 gir1.2-adw-1:arm64 gir1.2-adw-1:armhf gir1.2-adw-1:amd64 libadwaita-1-0:arm64 libadwaita-1-0:armhf libadwaita-1-0:amd64 libadwaita-1-dev:arm64 libadwaita-1-dev:armhf libadwaita-1-dev:amd64 libadwaita-1-doc:arm64 libadwaita-1-doc:armhf libadwaita-1-doc:amd64 libadwaita-1-examples:arm64 libadwaita-1-examples:armhf libadwaita-1-examples:amd64 gnome-calculator:arm64 gnome-calculator:armhf gnome-calculator:amd64 gnome-calendar:arm64 gnome-calendar:armhf gnome-calendar:amd64 gnome-text-editor:arm64 gnome-text-editor:armhf gnome-text-editor:amd64 gir1.2-spelling-1:arm64 gir1.2-spelling-1:armhf gir1.2-spelling-1:amd64 libspelling-1-2:arm64 libspelling-1-2:armhf libspelling-1-2:amd64 libspelling-1-dev:arm64 libspelling-1-dev:armhf libspelling-1-dev:amd64 libspelling-1-doc:arm64 libspelling-1-doc:armhf libspelling-1-doc:amd64 libspelling-1-tests:arm64 libspelling-1-tests:armhf libspelling-1-tests:amd64 gir1.2-goa-1.0:arm64 gir1.2-goa-1.0:armhf gir1.2-goa-1.0:amd64 gnome-online-accounts:arm64 gnome-online-accounts:armhf gnome-online-accounts:amd64 libgoa-1.0-0b:arm64 libgoa-1.0-0b:armhf libgoa-1.0-0b:amd64 libgoa-1.0-common:arm64 libgoa-1.0-common:armhf libgoa-1.0-common:amd64 libgoa-1.0-dev:arm64 libgoa-1.0-dev:armhf libgoa-1.0-dev:amd64 libgoa-1.0-doc:arm64 libgoa-1.0-doc:armhf libgoa-1.0-doc:amd64 libgoa-backend-1.0-2:arm64 libgoa-backend-1.0-2:armhf libgoa-backend-1.0-2:amd64 libgoa-backend-1.0-dev:arm64 libgoa-backend-1.0-dev:armhf libgoa-backend-1.0-dev:amd64
Pin: release a=experimental
Pin-Priority: 1001

# Always prefer Droidian packages
Package: *
Pin: release o=Droidian
Pin-Priority: 1002

# Drop adaptation packages that aren't supported
# anymore by one of the previous maintainers
Drop: src:linux-android-daria-zahedan src:adaptation-droidian-zahedan
Drop: src:linux-android-xiaomi-angelica src:adaptation-droidian-angelica
Drop: src:linux-android-samsung-starqlte src:adaptation-droidian-starqlte
Drop: src:linux-android-xiaomi-lavender src:adaptation-droidian-lavender
Drop: src:linux-android-samsung-star2lte src:linux-android-samsung-crownlte src:adaptation-droidian-exynos9810

# Drop batman, unmaintained and not supported.
# Last snapshot shipping that is 98.
Drop: src:batman

# Drop packages from meta-phosh, which is
# unused in Droidian since a lot of time
# and causes confusion
Drop: src:meta-phosh

# Ensure we keep high-priority packages
Keep: priority:1002

# Important: always keep Droidian packages
Keep: origin:Droidian

# Update information
Update-From: @DROIDIAN_UPDATE_FROM@

# Finally publish the snapshot
Target: ./droidian-snapshots/@DROIDIAN_VERSION@/
Suites: rolling
Architectures: amd64 armhf arm64
Components: main contrib non-free
Origin: Droidian
Label: Droidian (snapshot)
Version: @DROIDIAN_VERSION@
